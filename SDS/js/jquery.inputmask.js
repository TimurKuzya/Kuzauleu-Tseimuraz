(function(e){void 0==e.fn.inputmask&&(e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:e.noop,onKeyDown:e.noop,showMaskOnHover:!0,onKeyValidation:e.noop,numericInput:!1,radixPoint:".",definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451]",cardinality:1},"*":{validator:"[A-Za-z\u0410-\u044f\u0401\u04510-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,16,17,18,20,27,33,34,35,36,37,38,39,40,46,91,93,108]},val:e.fn.val},e.fn.inputmask=function(G,W){function P(b){return(b=a.aliases[b])?(b.alias&&P(b.alias),e.extend(!0,a,b),e.extend(!0,a,W),!0):!1}function Q(){var b=!1,c=0;1==a.mask.length&&0==a.greedy&&(a.placeholder="");for(var p=e.map(a.mask.split(""),function(p,d){var h=[];if(p==a.escapeChar)b=!0;else if(p!=a.optionalmarker.start&&p!=a.optionalmarker.end||b){var e=a.definitions[p];if(e&&!b)for(var l=0;l<e.cardinality;l++)h.push(F(c+l));else h.push(p),b=!1;c+=h.length;return h}}),h=p.slice(),l=1;l<a.repeat&&a.greedy;l++)h=h.concat(p.slice());return h}function R(){var b=!1,c=!1,p=!1;return e.map(a.mask.split(""),function(h,e){var l=[];if(h==a.escapeChar)c=!0;else{if(h!=a.optionalmarker.start||c){if(h!=a.optionalmarker.end||c){var d=a.definitions[h];if(d&&!c){for(var k=d.prevalidator,g=k?k.length:0,q=1;q<d.cardinality;q++){var m=g>=q?k[q-1]:[],w=m.validator;m=m.cardinality;l.push({fn:w?"string"==typeof w?new RegExp(w):new function(){this.test=w}:/./,cardinality:m?m:1,optionality:b,newBlockMarker:1==b?p:!1,offset:0,casing:d.casing,def:h});1==b&&(p=!1)}l.push({fn:d.validator?"string"==typeof d.validator?new RegExp(d.validator):new function(){this.test=d.validator}:/./,cardinality:d.cardinality,optionality:b,newBlockMarker:p,offset:0,casing:d.casing,def:h})}else l.push({fn:null,cardinality:0,optionality:b,newBlockMarker:p,offset:0,casing:null,def:h}),c=!1;p=!1;return l}b=!1}else b=!0;p=!0}})}function J(b,c,p,h){var e=!1;if(0<=b&&b<q()){e=b%g.length;for(var k=c?1:0,d="",m=g[e].cardinality;m>k;m--)d+=B(p,e-(m-1));c&&(d+=c);e=null!=g[e].fn?g[e].fn.test(d,p,b,h,a):!1}setTimeout(a.onKeyValidation.call(this,e,a),0);return e}function C(b){b=g[b%g.length];return void 0!=b?b.fn:!1}function F(b){return a.placeholder.charAt(b%a.placeholder.length)}function q(){var b=k.length;!a.greedy&&1<a.repeat&&(b+=k.length*(a.repeat-1));return b}function D(b,a){var c=q();if(a>=c)return c;for(var e=a;++e<c&&!C(e););return e}function K(b,a){var c=a;if(0>=c)return 0;for(;0<--c&&!C(c););return c}function I(b,a,p){var c=g[a%g.length],e=p;if(void 0!=e)switch(c.casing){case "upper":e=p.toUpperCase();break;case "lower":e=p.toLowerCase()}b[a]=e}function B(a,c,e){e&&(c=S(a,c));return a[c]}function S(a,c,e){if(e)for(;0>c&&a.length<q();)for(e=k.length-1,c=k.length;void 0!==k[e];)a.unshift(k[e--]);else for(;void 0==a[c]&&a.length<q();)for(e=0;void 0!==k[e];)a.push(k[e++]);return c}function E(a,c,e){a._valueSet(c.join(""));void 0!=e&&(L?setTimeout(function(){m(a,e)},100):m(a,e))}function T(a,c,e){for(var b=q();c<e&&c<b;c++)I(a,c,B(k.slice(),c))}function M(a,c){I(a,c,B(k,c%g.length))}function t(b,c,p,h){var l=e(b).data("inputmask").isRTL,m=O(b._valueGet(),l).split("");if(l){var d=q(),u=m.reverse();u.length=d;for(var v=0;v<d;v++){var t=(d-(v+1))%g.length;null==g[t].fn&&u[v]!=B(k,t)?(u.splice(v,0,B(k,t)),u.length=d):u[v]=u[v]||B(k,t)}m=u.reverse()}T(c,0,c.length);c.length=k.length;var A=u=-1,w;d=q();var z=m.length;t=0==z?d:-1;for(v=0;v<z;v++)for(var x=A+1;x<d;x++)if(C(x)){var f=m[v];!1!==(w=J(x,f,c,!p))?(!0!==w&&(x=w.pos||x,f=w.c||f),I(c,x,f),u=A=x):(M(c,x),f==F(x)&&(t=A=x));break}else if(M(c,x),u==A&&(u=x),A=x,m[v]==B(c,x))break;if(0==a.greedy)for(v=O(c.join(""),l).split("");c.length!=v.length;)l?c.shift():c.pop();p&&E(b,c);return l?a.numericInput?-1!=e.inArray(a.radixPoint,c)&&!0!==h?e.inArray(a.radixPoint,c):D(c,d):D(c,t):D(c,u)}function X(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","gim"),"\\$1")}function O(a,c){return c?a.replace(new RegExp("^("+X(k.join(""))+")*"),""):a.replace(new RegExp("("+X(k.join(""))+")*$"),"")}function U(a,c){t(a,c,!1);var b=c.slice();if(e(a).data("inputmask").isRTL)for(var h=0;h<=b.length-1;h++){var k=h%g.length;if(g[k].optionality)if(F(h)!=c[h]&&C(h))break;else b.splice(0,1);else break}else for(h=b.length-1;0<=h;h--)if(k=h%g.length,g[k].optionality)if(F(h)!=c[h]&&C(h))break;else b.pop();else break;E(a,b)}function Y(a,c){var b=a[0];if(!g||!0!==c&&a.hasClass("hasDatepicker"))return b._valueGet();var h=k.slice();t(b,h);return e.map(h,function(a,c){return C(c)&&a!=B(k.slice(),c)?a:null}).join("")}function m(b,c,e){b=b.jquery&&0<b.length?b[0]:b;if("number"==typeof c){e="number"==typeof e?e:c;0==a.insertMode&&c==e&&e++;if(b.setSelectionRange)b.setSelectionRange(c,e);else if(b.createTextRange){var h=b.createTextRange();h.collapse(!0);h.moveEnd("character",e);h.moveStart("character",c);h.select()}b.focus()}else return h=L?h:null,null==h&&(b.setSelectionRange?(c=b.selectionStart,e=b.selectionEnd):document.selection&&document.selection.createRange&&
(h=document.selection.createRange(),c=0-h.duplicate().moveStart("character",-1E5),e=c+h.text.length),h={begin:c,end:e}),h}function V(b){function c(a){var d=!0;a=a._valueGet();for(var c=a.length,f=0;f<c;f++)if(C(f)&&a.charAt(f)==F(f)){d=!1;break}return d}function p(a,c,e){for(;!C(a)&&0<=a-1;)a--;for(var f=a;f<c&&f<q();f++)if(C(f)){M(d,f);var b=D(d,f),N=B(d,b);if(N!=F(b))if(b<q()&&!1!==J(f,N,d,!0)&&g[f%g.length].def==g[b%g.length].def)I(d,f,B(d,b)),M(d,b);else{if(C(f))break}else if(void 0==e)break}else M(d,f);void 0!=e&&I(d,z?c:K(d,c),e);d=O(d.join(""),z).split("");0==d.length&&(d=k.slice());return a}function h(a,c,e,b){for(;a<=c&&a<q();a++)if(C(a)){var f=B(d,a);I(d,a,e);if(f!=F(a))if(e=D(d,a),e<q())if(!1!==J(e,f,d,!0)&&g[a%g.length].def==g[e%g.length].def)e=f;else if(C(e))break;else e=f;else break;else if(!0!==b)break}else M(d,a);b=d.length;d=O(d.join(""),z).split("");0==d.length&&(d=k.slice());return c-(b-d.length)}var l=e(b);if(l.is(":input")){a.greedy=a.greedy?a.greedy:0==a.repeat;var H=l.prop("maxLength");q()>H&&-1<H&&(H<k.length&&(k.length=H),0==a.greedy&&(a.repeat=Math.round(H/k.length)),l.prop("maxLength",2*q()));l.data("inputmask",{tests:g,_buffer:k,greedy:a.greedy,repeat:a.repeat,autoUnmask:a.autoUnmask,definitions:a.definitions,isRTL:!1});(function(a){var d;Object.getOwnPropertyDescriptor&&(d=Object.getOwnPropertyDescriptor(a,"value"));d&&d.get?a._valueGet||(a._valueGet=d.get,a._valueSet=d.set,Object.defineProperty(a,"value",{get:function(){var a=e(this),d=e(this).data("inputmask");return d&&d.autoUnmask?a.inputmask("unmaskedvalue"):this._valueGet()!=d._buffer.join("")?this._valueGet():""},set:function(a){this._valueSet(a);e(this).triggerHandler("setvalue.inputmask")}})):document.__lookupGetter__&&a.__lookupGetter__("value")?a._valueGet||(a._valueGet=a.__lookupGetter__("value"),a._valueSet=a.__lookupSetter__("value"),a.__defineGetter__("value",function(){var a=e(this),d=e(this).data("inputmask");return d&&d.autoUnmask?a.inputmask("unmaskedvalue"):this._valueGet()!=d._buffer.join("")?this._valueGet():""}),a.__defineSetter__("value",function(a){this._valueSet(a);e(this).triggerHandler("setvalue.inputmask")})):(a._valueGet||(a._valueGet=function(){return this.value},a._valueSet=function(a){this.value=a}),1!=e.fn.val.inputmaskpatch&&(e.fn.val=function(){if(0==arguments.length){var a=e(this);if(a.data("inputmask")){if(a.data("inputmask").autoUnmask)return a.inputmask("unmaskedvalue");var d=e.inputmask.val.apply(a);return d!=a.data("inputmask")._buffer.join("")?d:""}return e.inputmask.val.apply(a)}var c=arguments;return this.each(function(){var a=e(this),d=e.inputmask.val.apply(a,c);a.data("inputmask")&&a.triggerHandler("setvalue.inputmask");return d})},e.extend(e.fn.val,{inputmaskpatch:!0})))})(b);var d=k.slice(),u=b._valueGet(),v=!1,G=!1,A=-1,w=D(d,-1);K(d,q());var z=!1;if("rtl"==b.dir||a.numericInput)b.dir="ltr",l.css("text-align","right"),l.removeAttr("dir"),H=l.data("inputmask"),H.isRTL=!0,l.data("inputmask",H),z=!0;l.unbind(".inputmask");l.removeClass("focus.inputmask");l.bind("mouseenter.inputmask",function(){if(!e(this).hasClass("focus.inputmask")&&a.showMaskOnHover){var c=this._valueGet().length;c<d.length&&(0==c&&(d=k.slice()),E(this,d))}}).bind("blur.inputmask",function(){var b=e(this),N=this._valueGet();b.removeClass("focus.inputmask");N!=u&&b.change();a.clearMaskOnLostFocus&&(N==k.join("")?this._valueSet(""):U(this,d));c(this)||(b.trigger("incomplete"),a.clearIncomplete&&(a.clearMaskOnLostFocus?this._valueSet(""):(d=k.slice(),E(this,d))))}).bind("focus.inputmask",function(){var c=e(this);if(!c.hasClass("focus.inputmask")&&!a.showMaskOnHover){var b=this._valueGet().length;b<d.length&&(0==b&&(d=k.slice()),m(this,t(this,d,!0)))}c.addClass("focus.inputmask");u=this._valueGet()}).bind("mouseleave.inputmask",function(){var c=e(this);a.clearMaskOnLostFocus&&(c.hasClass("focus.inputmask")||(this._valueGet()==k.join("")||""==this._valueGet()?this._valueSet(""):U(this,d)))}).bind("click.inputmask",function(){var a=this;setTimeout(function(){var c=m(a);c.begin==c.end&&(c=c.begin,A=t(a,d,!1),z?m(a,c>A&&(!1!==J(c,d[c],d,!0)||!C(c))?c:A):m(a,c<A&&(!1!==J(c,d[c],d,!0)||!C(c))?c:A))},0)}).bind("dblclick.inputmask",function(){var a=this;setTimeout(function(){m(a,0,A)},0)}).bind("keydown.inputmask",function(c){v=!1;var b=this,f=c.keyCode,r=m(b);if(a.numericInput){var n=b._valueGet().indexOf(a.radixPoint);-1!=n&&(z=r.begin<=n||r.end<=n)}if(f==a.keyCode.BACKSPACE||f==a.keyCode.DELETE||Z&&127==f){n=q();if(0==r.begin&&r.end==n)d=k.slice(),E(b,d),m(b,t(b,d,!1));else if(1<r.end-r.begin||1==r.end-r.begin&&a.insertMode)T(d,r.begin,r.end),E(b,d,z?t(b,d,!1):r.begin);else{var g=r.begin-(f==a.keyCode.DELETE?0:1);g<w&&f==a.keyCode.DELETE&&(g=w);g>=w&&(a.numericInput&&a.greedy&&f==a.keyCode.DELETE&&d[g]==a.radixPoint&&(g=D(d,g),z=!1),z?(g=h(w,g,F(g),!0),g=a.numericInput&&a.greedy&&f==a.keyCode.BACKSPACE&&d[g+1]==a.radixPoint?g+1:D(d,g)):g=p(g,n),E(b,d,g))}b._valueGet()==k.join("")&&e(b).trigger("cleared");return!1}if(f==a.keyCode.END||f==a.keyCode.PAGE_DOWN)return setTimeout(function(){var e=t(b,d,!1,!0);a.insertMode||e!=q()||c.shiftKey||e--;m(b,c.shiftKey?r.begin:e,e)},0),!1;if(f==a.keyCode.HOME||f==a.keyCode.PAGE_UP)return m(b,0,c.shiftKey?r.begin:0),!1;if(f==a.keyCode.ESCAPE)return b._valueSet(u),m(b,0,t(b,d)),!1;if(f==a.keyCode.INSERT)return a.insertMode=!a.insertMode,m(b,a.insertMode||r.begin!=q()?r.begin:r.begin-1),!1;if(c.ctrlKey&&88==f)setTimeout(function(){m(b,t(b,d,!0))},0);else if(!a.insertMode){if(f==a.keyCode.RIGHT)return f=r.begin==r.end?r.end+1:r.end,f=f<q()?f:r.end,m(b,c.shiftKey?r.begin:f,c.shiftKey?f+1:f),!1;if(f==a.keyCode.LEFT)return f=r.begin-1,f=0<f?f:0,m(b,f,c.shiftKey?r.end:f),!1}a.onKeyDown.call(this,c,a);G=-1!=e.inArray(f,a.ignorables)}).bind("keypress.inputmask",function(b){if(v)return!1;v=!0;var f=this,k=e(f);b=b||window.event;var g=b.which||b.charCode||b.keyCode;if(a.numericInput&&g==a.radixPoint.charCodeAt(a.radixPoint.length-1)){var n=f._valueGet().indexOf(a.radixPoint);m(f,D(d,-1!=n?n:q()))}if(b.ctrlKey||b.altKey||b.metaKey||G)return!0;if(g){k.trigger("input");b=m(f);g=String.fromCharCode(g);var l=q();T(d,b.begin,b.end);if(z){n=a.numericInput?b.end:K(d,b.end);var y;if(!1!==(y=J(n==l||B(d,n)==a.radixPoint?K(d,n):n,g,d,!1))){!0!==y&&(n=y.pos||b,g=y.c||g);y=w;if(1==a.insertMode){if(1==a.greedy)for(var t=d.slice();B(t,y,!0)!=F(y)&&y<=n;)y=y==l?l+1:D(d,y);if(y<=n&&(a.greedy||d.length<l))d[w]!=F(w)&&d.length<l&&(l=S(d,-1,z),0!=b.end&&(n+=l),l=d.length),p(y,a.numericInput?K(d,n):n,g);else return!1}else I(d,a.numericInput?K(d,n):n,g);E(f,d,a.numericInput&&0==n?D(d,n):n);setTimeout(function(){c(f)&&k.trigger("complete")},0)}else L&&E(f,d,b.begin)}else if(n=D(d,b.begin-1),S(d,n,z),!1!==(y=J(n,g,d,!1))){!0!==y&&(n=y.pos||n,g=y.c||g);if(1==a.insertMode){b=q();for(t=d.slice();B(t,b,!0)!=F(b)&&b>=n;)b=0==b?-1:K(d,b);if(b>=n)h(n,d.length,g);else return!1}else I(d,n,g);b=D(d,n);E(f,d,b);setTimeout(function(){c(f)&&k.trigger("complete")},0)}else L&&E(f,d,b.begin);return!1}}).bind("keyup.inputmask",function(b){var c=e(this),f=b.keyCode;a.onKeyUp.call(this,b,a);f==a.keyCode.TAB&&c.hasClass("focus.inputmask")&&0==this._valueGet().length&&(d=k.slice(),E(this,d),z||m(this,0),u=this._valueGet())}).bind(aa+".inputmask, dragdrop.inputmask, drop.inputmask",function(){var a=this;setTimeout(function(){m(a,t(a,d,!0))},0)}).bind("setvalue.inputmask",function(){u=this._valueGet();t(this,d,!0);this._valueGet()==k.join("")&&this._valueSet("")}).bind("complete.inputmask",a.oncomplete).bind("incomplete.inputmask",a.onincomplete).bind("cleared.inputmask",a.oncleared);A=t(b,d,!0);try{var x=document.activeElement}catch(f){}x===b?(l.addClass("focus.inputmask"),m(b,A)):a.clearMaskOnLostFocus&&(b._valueGet()==k.join("")?b._valueSet(""):U(b,d));(function(a){var b=e._data(a).events;e.each(b,function(b,c){e(a).bind(b+".inputmask",function(a){if(this.readOnly||this.disabled)return a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault(),!1});for(var d=c[c.length-1],f=c.length-1;0<f;f--)c[f]=c[f-1];c[0]=d})})(b)}}var a=e.extend(!0,{},e.inputmask.defaults,W),aa=function(a){var b=document.createElement("input");a="on"+a;var e=a in b;e||(b.setAttribute(a,"return;"),e="function"==typeof b[a]);return e}("paste")?"paste":"input",Z=null!=navigator.userAgent.match(/iphone/i),L=null!=navigator.userAgent.match(/android.*mobile safari.*/i);if(L){var ba=navigator.userAgent.match(/mobile safari.*/i);L=533>=parseInt((new RegExp(/[0-9]+/)).exec(ba))}if("string"==typeof G)switch(G){case "mask":var k=Q(),g=R();return this.each(function(){V(this)});case "unmaskedvalue":return g=this.data("inputmask").tests,
k=this.data("inputmask")._buffer,a.greedy=this.data("inputmask").greedy,a.repeat=this.data("inputmask").repeat,a.definitions=this.data("inputmask").definitions,Y(this);case "remove":return this.each(function(){var b=e(this),c=this;setTimeout(function(){if(b.data("inputmask")){g=b.data("inputmask").tests;k=b.data("inputmask")._buffer;a.greedy=b.data("inputmask").greedy;a.repeat=b.data("inputmask").repeat;a.definitions=b.data("inputmask").definitions;c._valueSet(Y(b,!0));b.removeData("inputmask");b.unbind(".inputmask");b.removeClass("focus.inputmask");var e;Object.getOwnPropertyDescriptor&&(e=Object.getOwnPropertyDescriptor(c,"value"));e&&e.get?c._valueGet&&Object.defineProperty(c,"value",{get:c._valueGet,set:c._valueSet}):document.__lookupGetter__&&c.__lookupGetter__("value")&&c._valueGet&&(c.__defineGetter__("value",c._valueGet),c.__defineSetter__("value",c._valueSet));delete c._valueGet;delete c._valueSet}},0)});case "getemptymask":return this.data("inputmask")?this.data("inputmask")._buffer.join(""):"";case "hasMaskedValue":return this.data("inputmask")?
!this.data("inputmask").autoUnmask:!1;default:return P(G)||(a.mask=G),k=Q(),g=R(),this.each(function(){V(this)})}return"object"==typeof G?(a=e.extend(!0,{},e.inputmask.defaults,G),P(a.alias),k=Q(),g=R(),this.each(function(){V(this)})):this})})(jQuery);
